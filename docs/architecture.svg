<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" font-size="20" font-weight="bold" text-anchor="middle">Log Processing Pipeline Architecture</text>
  
  <!-- Client -->
  <rect x="50" y="100" width="100" height="60" fill="#FFE4B5" stroke="#000" stroke-width="2" rx="5"/>
  <text x="100" y="135" text-anchor="middle" font-size="14">Client</text>
  
  <!-- API Gateway -->
  <rect x="200" y="100" width="120" height="60" fill="#98FB98" stroke="#000" stroke-width="2" rx="5"/>
  <text x="260" y="125" text-anchor="middle" font-size="14">API Gateway</text>
  <text x="260" y="145" text-anchor="middle" font-size="12">POST /ingest</text>
  
  <!-- Lambda API -->
  <rect x="370" y="100" width="120" height="60" fill="#87CEEB" stroke="#000" stroke-width="2" rx="5"/>
  <text x="430" y="125" text-anchor="middle" font-size="14">Lambda</text>
  <text x="430" y="145" text-anchor="middle" font-size="12">(ingest-api)</text>
  
  <!-- SQS Queue -->
  <rect x="540" y="100" width="120" height="60" fill="#DDA0DD" stroke="#000" stroke-width="2" rx="5"/>
  <text x="600" y="125" text-anchor="middle" font-size="14">SQS Queue</text>
  <text x="600" y="145" text-anchor="middle" font-size="12">(Async)</text>
  
  <!-- Lambda Worker -->
  <rect x="540" y="250" width="120" height="60" fill="#87CEEB" stroke="#000" stroke-width="2" rx="5"/>
  <text x="600" y="275" text-anchor="middle" font-size="14">Lambda</text>
  <text x="600" y="295" text-anchor="middle" font-size="12">(log-worker)</text>
  
  <!-- DynamoDB -->
  <rect x="540" y="380" width="120" height="60" fill="#FFB6C1" stroke="#000" stroke-width="2" rx="5"/>
  <text x="600" y="405" text-anchor="middle" font-size="14">DynamoDB</text>
  <text x="600" y="425" text-anchor="middle" font-size="12">(Multi-tenant)</text>
  
  <!-- Arrows -->
  <!-- Client to API Gateway -->
  <path d="M 150 130 L 200 130" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- API Gateway to Lambda API -->
  <path d="M 320 130 L 370 130" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Lambda API to SQS -->
  <path d="M 490 130 L 540 130" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- SQS to Lambda Worker -->
  <path d="M 600 160 L 600 250" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Lambda Worker to DynamoDB -->
  <path d="M 600 310 L 600 380" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#000"/>
    </marker>
  </defs>
  
  <!-- Data Flow Examples -->
  <text x="50" y="220" font-size="14" font-weight="bold">Data Flow Examples:</text>
  
  <!-- JSON Flow -->
  <rect x="50" y="240" width="300" height="80" fill="#F0F8FF" stroke="#4169E1" stroke-width="1" rx="5"/>
  <text x="60" y="260" font-size="12" font-weight="bold">JSON Input:</text>
  <text x="60" y="280" font-size="11">{"tenant_id": "acme", "log_id": "123",</text>
  <text x="60" y="295" font-size="11">"text": "User 555-0199..."}</text>
  <text x="60" y="310" font-size="11">→ Normalized → Queue → Process → Store</text>
  
  <!-- Text Flow -->
  <rect x="50" y="340" width="300" height="80" fill="#FFF0F5" stroke="#FF69B4" stroke-width="1" rx="5"/>
  <text x="60" y="360" font-size="12" font-weight="bold">Text Input:</text>
  <text x="60" y="380" font-size="11">Headers: X-Tenant-ID: beta</text>
  <text x="60" y="395" font-size="11">Body: "Raw log text..."</text>
  <text x="60" y="410" font-size="11">→ Extract tenant → Queue → Process → Store</text>
  
  <!-- Multi-tenancy -->
  <rect x="50" y="440" width="300" height="100" fill="#F5FFFA" stroke="#228B22" stroke-width="1" rx="5"/>
  <text x="60" y="460" font-size="12" font-weight="bold">Multi-Tenant Isolation:</text>
  <text x="60" y="480" font-size="11">DynamoDB Structure:</text>
  <text x="60" y="495" font-size="11">  • Partition: tenant_id (acme, beta, etc.)</text>
  <text x="60" y="510" font-size="11">  • Sort: log_id (unique per log)</text>
  <text x="60" y="525" font-size="11">  • Result: Complete data separation</text>
  
  <!-- Key Features -->
  <rect x="400" y="460" width="350" height="80" fill="#FFFACD" stroke="#FFD700" stroke-width="1" rx="5"/>
  <text x="410" y="480" font-size="12" font-weight="bold">Key Features:</text>
  <text x="410" y="500" font-size="11">✓ Serverless (scales automatically)</text>
  <text x="410" y="515" font-size="11">✓ Async processing (202 response)</text>
  <text x="410" y="530" font-size="11">✓ Handles 1000+ requests/minute</text>
</svg>
